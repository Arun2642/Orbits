<html>
<head>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
<p>Hello</p>

<button onclick="renderWithTime()">Itterate</button>
<div id="tester" style="width:1200px;height:500px;">Namaste</div>

<script>

var t = 0;
var a = 36;
var b = 36;
var c = Math.sqrt(Math.pow(a,2)-Math.pow(b,2));
var j = Math.PI/3;
var k = Math.PI/4;
var l = Math.PI/2;
var timeStep = 1
var period = 50
var sun = {
    x: [0],
    y: [0],
    z: [0],
    mode: 'markers',
    marker: {
        color: 'rgb(255, 255, 0)',
        size: 24,
        symbol: 'circle',
        opacity: 1,
        line: {
        color: 'rgb(204, 204, 204)',
        width: 1},
        opacity: 0.8},
    type: 'scatter3d'
};
var earth = {
  x: [Math.cos(k)*Math.cos(l)*(c + a*Math.cos(t)) + b*(Math.cos(l)*Math.sin(j)*Math.sin(k) + Math.cos(j)*Math.sin(l))*Math.sin(t)],
  y: [b*(Math.cos(j)*Math.cos(l) - Math.sin(j)*Math.sin(k)*Math.sin(l))*Math.sin(t)-Math.cos(k)*(c + a*Math.cos(t))*Math.sin(l)],
  z: [(c +a*Math.cos(t))*Math.sin(k) - b*Math.cos(k)*Math.sin(j)*Math.sin(t)],
    mode: 'markers',
    marker: {
        color: 'rgb(22, 234, 132)',
        size: 8,
        symbol: 'circle',
        line: {
        color: 'rgb(204, 204, 204)',
        width: 1},
        opacity: 0.8},
    type: 'scatter3d'
};
var bound = 30;
var boundingPoints = {
    x: [bound,bound,bound,bound,-bound,-bound,-bound,-bound],
    y: [bound,bound,-bound,-bound,bound,bound,-bound,-bound],
    z: [bound,-bound,bound,-bound,bound,-bound,bound,-bound],
    mode: 'markers',
    marker: {
        color: 'rgb(0,0,0)',
        size:1,
        symbol: 'circle',
        line:{
            color: 'rgb(255,255,255)',
            width: 0},
            opacity: 0},
    type: 'scatter3d'
};
var data = [sun, earth, boundingPoints];
var layout = {margin: {
    l: 0,
    r: 0,
    b: 0,
    t: 0
    }};
t += 2*Math.PI*a*b*timeStep/(period*(Math.pow(earth.x[0],2)+Math.pow(earth.y[0],2)+Math.pow(earth.z[0],2)));
TESTER = document.getElementById('tester');
Plotly.plot(TESTER, data, layout);

function renderWithTime(){
  // x: [a*Math.cos(k)*Math.cos(l)*Math.cos(t) + c*(Math.sin(j)*Math.sin(l) - Math.cos(j)*Math.cos(l)*Math.sin(k)) + b*(Math.cos(l)*Math.sin(j)*Math.sin(k) + Math.cos(j)*Math.sin(l))*Math.sin(t)],
  // y: [-a*Math.cos(k)*Math.cos(t)*Math.sin(l)+c*(Math.cos(l)*Math.sin(j)+Math.cos(j)*Math.sin(k)*Math.sin(l))+b*(Math.cos(j)*Math.cos(l)-Math.sin(j)*Math.sin(k)*Math.sin(l))*Math.sin(t)],
  // z: [c*Math.cos(j)*Math.cos(k)-b*Math.sin(j)*Math.sin(t)*Math.cos(k)+a*Math.cos(t)*Math.sin(k)],
  // x: [a*Math.cos(t)+c],
  // y: [b*Math.sin(t)],
  // z: [0],
    console.log("rendering")
    var earth = {
      x: [Math.cos(k)*Math.cos(l)*(c + a*Math.cos(t)) + b*(Math.cos(l)*Math.sin(j)*Math.sin(k) + Math.cos(j)*Math.sin(l))*Math.sin(t)],
      y: [b*(Math.cos(j)*Math.cos(l) - Math.sin(j)*Math.sin(k)*Math.sin(l))*Math.sin(t)-Math.cos(k)*(c + a*Math.cos(t))*Math.sin(l)],
      z: [(c +a*Math.cos(t))*Math.sin(k) - b*Math.cos(k)*Math.sin(j)*Math.sin(t)],
        mode: 'markers',
        marker: {
            color: 'rgb(22, 234, 132)',
            size: 8,
            symbol: 'circle',
            line: {
            color: 'rgb(204, 204, 204)',
            width: 1},
            opacity: 0.8},
        type: 'scatter3d'
    };
    var data = [earth];
    var layout = {
    };
    var transitions = {
      transition: {
        duration: 500,
        easing: 'cubic-in-out'
      },
      frame: {
        redraw:false
      }
    }
    t += 2*Math.PI*a*b*timeStep/(period*(Math.pow(earth.x[0],2)+Math.pow(earth.y[0],2)+Math.pow(earth.z[0],2)));
    Plotly.plot(TESTER, {data, layout}, transitions);
}
var myVar = setInterval(renderWithTime, 1000);
</script>

</body>
</html>



 <!-- <head>
   <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 </head>
 <body>
   <script>
   </script>
   <div id="graph"></div>
   <button onclick="javascript:randomize();">Randomize!</button>
   <script>
   Plotly.plot('graph', [{
     x: [1, 2, 3],
     y: [0, 0.5, 1],
     line: {simplify: false},
   }]);

   function randomize() {
     Plotly.animate('graph', {
       data: [{y: [Math.random(), Math.random(), Math.random()]}],
       traces: [0],
       layout: {}
     }, {
       transition: {
         duration: 500,
         easing: 'cubic-in-out'
       }
     })
   }
   </script>
 </body> -->
